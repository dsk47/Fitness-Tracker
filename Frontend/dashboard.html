<!-- frontend/dashboard.html -->
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Dashboard</title>
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <nav>
    <a href="dashboard.html">Dashboard</a> |
    <a href="workouts.html">Workouts</a> |
    <a href="metrics.html">Metrics</a> |
    <a href="diet.html">Diet</a> |
    <a href="analytics.html">Analytics</a> |
    <a href="guided.html">Guided</a> |
    <a href="reminders.html">Reminders</a> |

    <button onclick="logout()">Logout</button>
  </nav>
  <hr />

  <h1>Dashboard</h1>

  <section id="summary">
    <h2>Today Summary</h2>
    <p id="summary-text">Loading...</p>
  </section>

  <section id="upcoming-session">
    <h2>Upcoming Guided Session</h2>
    <p id="upcoming-text">No upcoming session.</p>
  </section>

  <script src="js/utils.js"></script>
  <script src="js/auth.js"></script>
  <script>
    requireAuth();

    async function loadDashboard() {
      try {
        const data = await getJSON("/analytics/summary");
        const summaryEl = document.getElementById("summary-text");
        summaryEl.textContent =
          `Fitness Score Today: ${data.todayScore} | ` +
          `Workouts Today: ${data.todayWorkouts || 0}`;

        // Optional: load upcoming guided session
        const upcoming = data.upcomingRoutine;
        const upcomingText = document.getElementById("upcoming-text");
        if (upcoming) {
          upcomingText.textContent =
            `${upcoming.title} at ${upcoming.time} on ${upcoming.date}`;
        }
      } catch (err) {
        alert("Failed to load dashboard: " + err.message);
      }
    }

    loadDashboard();
  </script>
</body>
</html>
